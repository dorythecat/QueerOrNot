<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Queer or Not? | Game</title>
    <link rel="stylesheet" type="text/css" href="styles.css">
    <script type="text/javascript" src="script.js" defer></script>
  </head>

  <body>
    <div class="game active">
      <h1>Are you queer?</h1>
      <button onclick="startGame(true)">Yes</button>
      <button onclick="startGame(false)">No</button>
    </div>

    <div class="game inactive">
      <ul id="messages"></ul>
      <form id="form" action="javascript:void(0);">
        <input id="input" type="text" autocomplete="off" placeholder="Type your answer here..." required />
        <button>Send</button>
      </form>
    </div>
    <script src="/socket.io/socket.io.js"></script>
    <script>
      let cookies = document.cookie.split(';').reduce((acc, cookie) => {
        const [name, value] = cookie.trim().split('=');
        acc[name] = value;
        return acc;
      }, {});
      if (!cookies.queer) {
        cookies.queer = 'false'; // Default value if not set
      } else {
        const activeElement = document.getElementsByClassName('game active')[0];
        const inactiveElement = document.getElementsByClassName('game inactive')[0];
        if (activeElement) {
          activeElement.classList.remove('active');
          activeElement.classList.add('inactive');
        }
        if (inactiveElement) {
          inactiveElement.classList.remove('inactive');
          inactiveElement.classList.add('active');
        }
      }
      let isQueer = cookies.queer === 'true';

      var socket = io();

      var form = document.getElementById('form');
      var input = document.getElementById('input');

      form.addEventListener('submit', function(e) {
        e.preventDefault();
        if (input.value) {
          socket.emit('chat message', input.value);
          socket.emit('isQueer', isQueer);
          input.value = '';
        }
      });
    </script>
  </body>
</html>
